# Facebook 自动化系统文档

## 📚 文档索引

### 🚀 快速开始
- **[快速开始-轮次控制.md](快速开始-轮次控制.md)** - 5分钟快速上手指南

### 📖 详细文档
- **[轮次控制说明.md](轮次控制说明.md)** - 轮次控制功能完整说明
- **[热更新架构说明.md](热更新架构说明.md)** - 热更新架构设计（本地方案）
- **[热更新方案对比.md](热更新方案对比.md)** - 两种热更新方案对比

### 🌐 高级功能
- **[../../热更新完整方案.md](../../热更新完整方案.md)** - 远程自动更新方案（需要PHP服务器）

### ⚙️ 配置文件
- **[脚本配置/运行配置.json](脚本配置/运行配置.json)** - 线程数等运行参数
- **[脚本配置/轮次配置.json](脚本配置/轮次配置.json)** - 轮次控制配置
- **[脚本配置/轮次配置-测试.json](脚本配置/轮次配置-测试.json)** - 快速测试配置

## 🎯 核心功能

### 1. 轮次控制系统
- ✅ 每天自动执行3轮任务
- ✅ 轮次间自动等待（显示倒计时）
- ✅ 完成后等待到明天，自动重置
- ✅ 断点续传，程序崩溃后自动恢复
- ✅ 智能判断应该执行第几轮

### 2. 热更新架构
- ✅ 业务逻辑可随时修改
- ✅ 配置文件可随时调整
- ✅ 无需重新打包exe
- ✅ 重启程序即可生效

### 3. 任务系统
- ✅ 阅读任务
- ✅ 加好友任务
- ✅ 加入小组任务
- ✅ 小组转发任务
- ✅ 分享动态任务
- ✅ 设置头像任务
- ✅ 视频功能任务
- ✅ 通知功能任务
- ✅ 随机点击首页任务

## 📂 目录结构

```
automation/scripts/
│
├── 📄 main.py                          # 主控制器
├── 📄 账号.json                        # 账号数据
│
├── 📁 tasks/                           # 任务目录
│   ├── 📄 __init__.py
│   ├── 📄 阅读.py
│   ├── 📄 加好友.py
│   ├── 📄 加入小组.py
│   ├── 📄 小组转发.py
│   ├── 📄 分享动态.py
│   ├── 📄 设置头像.py
│   ├── 📄 视频功能.py
│   ├── 📄 通知功能.py
│   ├── 📄 随机点击首页.py
│   └── 📄 登录.py
│
├── 📁 脚本配置/                        # 配置目录
│   ├── 📄 运行配置.json
│   ├── 📄 轮次配置.json
│   └── 📄 轮次配置-测试.json
│
└── 📁 文档/                            # 文档目录
    ├── 📄 README.md                    # 本文件
    ├── 📄 快速开始-轮次控制.md
    ├── 📄 轮次控制说明.md
    └── 📄 热更新架构说明.md
```

## 🚀 快速开始

### 1. 启动程序
```bash
# 双击 exe 文件启动
# 或命令行启动
python facebook_dashboard.py
```

### 2. 观察日志
```
============================================================
自动化主控制器 v3.4.0
并发数: 4
============================================================

📊 执行状态分析：
  总账号数: 50
  今日已完成3轮: 0 个
  今日未完成3轮: 50 个
  💡 继续执行第 1 轮

============================================================
开始第 1 轮执行
============================================================
```

### 3. 等待执行
程序会自动执行3轮，每轮之间显示倒计时：
```
⏳ 等待第 2 轮... 剩余: 7.9小时 (预计 18:30:00 开始)
```

### 4. 自动循环
完成3轮后，程序会等待到明天，然后自动重置继续执行。

## ⚙️ 配置说明

### 运行配置
文件：`脚本配置/运行配置.json`
```json
{
  "线程数": 4  // 并发执行的账号数量
}
```

### 轮次配置
文件：`脚本配置/轮次配置.json`
```json
{
  "启用轮次控制": true,          // 是否启用轮次控制
  "每日轮次": 3,                 // 每天执行几轮
  "轮次间隔策略": "平均分配",     // 间隔策略
  "轮次间隔小时": 8,             // 固定间隔小时数
  "打乱账号顺序": true           // 是否打乱账号顺序
}
```

## 🔧 常见操作

### 修改轮次间隔
编辑 `脚本配置/轮次配置.json`：
```json
{
  "轮次间隔策略": "固定间隔",
  "轮次间隔小时": 6  // 改为6小时
}
```

### 快速测试
使用测试配置（3分钟间隔）：
```bash
# 将 轮次配置-测试.json 重命名为 轮次配置.json
# 或直接修改配置文件
```

### 禁用轮次控制
编辑 `脚本配置/轮次配置.json`：
```json
{
  "启用轮次控制": false
}
```

### 重置账号轮次
编辑 `账号.json`，找到对应账号：
```json
{
  "browser_id_xxx": {
    "今日执行轮次": 0,  // 改为0
    "最后执行日期": "2024-01-07"  // 改为昨天
  }
}
```

## 📊 数据文件

### 账号.json 结构
```json
{
  "browser_id_xxx": {
    "名称": "账号1",
    "c_user": "123456789",
    "首次运行": 1704700800,
    "运行次数": 15,
    
    // 轮次控制字段
    "今日执行轮次": 2,              // 今天已完成的轮次
    "最后执行日期": "2024-01-08",  // 最后执行的日期
    "最后执行时间": 1704700800,    // 最后执行的时间戳
    "最后执行轮数": 2,              // 最后执行的是第几轮
    "最后执行状态": "completed"     // completed/failed/running
  }
}
```

## 🛠️ 故障排除

### 问题1：程序启动失败
**可能原因**：
- Python环境问题
- 依赖包缺失
- 配置文件格式错误

**解决方法**：
1. 检查Python版本（需要3.7+）
2. 安装依赖：`pip install -r requirements.txt`
3. 检查配置文件JSON格式

### 问题2：账号一直被跳过
**可能原因**：
- 账号已完成当前轮次

**解决方法**：
- 正常现象，等待下一轮
- 或手动重置轮次

### 问题3：等待时间不对
**可能原因**：
- 配置文件设置错误

**解决方法**：
- 检查 `轮次配置.json` 中的间隔设置
- 确认策略是否正确

### 问题4：程序崩溃
**可能原因**：
- 代码错误
- 网络问题
- 浏览器问题

**解决方法**：
1. 查看错误日志
2. 重启程序（会自动恢复进度）
3. 如果持续崩溃，检查代码

## 📞 技术支持

### 查看日志
程序运行时会输出详细日志，包括：
- 启动信息
- 执行状态
- 错误信息
- 等待倒计时

### 调试模式
修改配置启用详细日志：
```json
{
  "调试模式": true
}
```

### 联系方式
- 查看文档：本目录下的各个md文件
- 查看代码：main.py 和 tasks/*.py

## 🎯 最佳实践

### 1. 定期备份
```bash
# 备份账号数据
cp 账号.json 账号.json.backup

# 备份配置文件
cp 脚本配置/轮次配置.json 脚本配置/轮次配置.json.backup
```

### 2. 监控日志
- 定期查看日志
- 确认任务正常执行
- 及时发现问题

### 3. 测试先行
- 修改配置前先备份
- 使用测试配置验证
- 确认无误后应用到生产

### 4. 渐进式调整
- 不要一次修改太多
- 每次修改后观察效果
- 逐步优化策略

## 📈 版本历史

### v3.4.0 (2024-01-08)
- ✅ 新增轮次控制功能
- ✅ 支持每日3轮自动执行
- ✅ 支持实时倒计时显示
- ✅ 支持断点续传
- ✅ 完善热更新架构

### v3.3.0
- 基础任务系统
- 多线程执行
- 账号管理

## 🔮 未来计划

- [ ] 在线热更新
- [ ] 远程配置管理
- [ ] 更多任务类型
- [ ] 性能优化
- [ ] UI改进

---

**版本**: v3.4.0  
**更新日期**: 2024-01-08  
**作者**: 自动化团队

**提示**: 建议从 [快速开始-轮次控制.md](快速开始-轮次控制.md) 开始阅读。
